{
  "name": "git-hex-getRebasePlan",
  "description": "Get structured rebase plan for last N commits, showing commit details for interactive rebase planning",
  "icons": [
    {
      "src": "../../assets/icons/get-rebase-plan.svg"
    }
  ],
  "inputSchema": {
    "type": "object",
    "properties": {
      "repoPath": {
        "type": "string",
        "description": "Path to the git repository (optional; defaults to the single configured root if omitted)"
      },
      "count": {
        "type": "integer",
        "description": "Number of commits to include in plan (default 10, max 200)"
      },
      "onto": {
        "type": "string",
        "description": "Base ref to rebase onto (default: upstream if set, otherwise HEAD~count clamped to history; uses empty tree for single-commit repos)"
      }
    }
  },
  "outputSchema": {
    "type": "object",
    "required": ["success", "plan_id", "commits", "onto", "branch"],
    "properties": {
      "success": {
        "type": "boolean",
        "description": "Whether the operation was successful"
      },
      "plan_id": {
        "type": "string",
        "description": "Unique identifier for this rebase plan"
      },
      "branch": {
        "type": "string",
        "description": "Current branch name"
      },
      "onto": {
        "type": "string",
        "description": "Base ref the rebase would be onto"
      },
      "commits": {
        "type": "array",
        "description": "List of commits in rebase order (oldest first)",
        "items": {
          "type": "object",
          "required": ["hash", "shortHash", "subject", "author", "date"],
          "properties": {
            "hash": { "type": "string" },
            "shortHash": { "type": "string" },
            "subject": { "type": "string" },
            "author": { "type": "string" },
            "date": { "type": "string" }
          }
        }
      },
      "summary": {
        "type": "string",
        "description": "Human-readable explanation of what was found"
      }
    }
  },
  "annotations": {
    "readOnlyHint": true,
    "destructiveHint": false,
    "idempotentHint": true,
    "openWorldHint": false
  },
  "timeoutSecs": 30
}
